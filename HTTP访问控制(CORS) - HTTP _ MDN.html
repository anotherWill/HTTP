<!DOCTYPE html>
<!-- saved from url=(0069)https://developer.mozilla.org/zh-CN/docs/Web/HTTP/Access_control_CORS -->
<html lang="zh-CN" dir="ltr" class="redesign cye-disabled cye-lm" data-ffo-opensanslight="true" data-ffo-opensans="true"><head prefix="og: http://ogp.me/ns#"><meta http-equiv="Content-Type" content="text/html; charset=UTF-8">
  
  <meta http-equiv="X-UA-Compatible" content="IE=Edge">
  <script async="" src="./HTTP访问控制(CORS) - HTTP _ MDN_files/analytics.js"></script><script>(function(d) { d.className = d.className.replace(/\bno-js/, ''); })(document.documentElement);</script><style id="nightModeStyle">
html.cye-enabled.cye-nm:not(*:-webkit-full-screen) body,
 html.cye-enabled.cye-nm:not(*:-webkit-full-screen) #cye-workaround-body {-webkit-filter:contrast(88%) brightness(75%) invert(1);}</style><style id="cyebody">html.cye-enabled.cye-lm body{background-color:#CCE8CF !important;border-color:rgb(51, 58, 51) !important;color:#221C26  !important}</style><style id="cyediv">html.cye-enabled.cye-lm div{background-color:#CCE8CF !important;border-color:rgb(51, 58, 51) !important;color:#221C26  !important}</style><style id="cyetable">html.cye-enabled.cye-lm th{background-color:#CCE8CF !important;border-color:rgb(51, 58, 51) !important;color:#221C26  !important}html.cye-enabled.cye-lm td{background-color:#CCE8CF !important;border-color:rgb(51, 58, 51) !important;color:#221C26  !important}</style><style id="cyetextInput">html.cye-enabled.cye-lm input[type=text]{background-color:#CCE8CF !important;border-color:rgb(51, 58, 51) !important;color:#221C26  !important}html.cye-enabled.cye-lm textarea{background-color:#CCE8CF !important;border-color:rgb(51, 58, 51) !important;color:#221C26  !important}</style><style id="cyeselect">html.cye-enabled.cye-lm select{background-color:#CCE8CF !important;border-color:rgb(51, 58, 51) !important;color:#221C26  !important}</style><style id="cyeul">html.cye-enabled.cye-lm ul{background-color:#CCE8CF !important;border-color:rgb(51, 58, 51) !important;color:#221C26  !important}</style><style id="cyea">html.cye-enabled.cye-lm a{background-color:#CCE8CF !important;border-color:rgb(51, 58, 51) !important;color:#221C26  !important}</style><style id="cyeChangeByClick">html.cye-enabled.cye-lm .cye-lm-tag,html.cye-enabled.cye-lm.cye-lm-tag{background-color:#CCE8CF !important;border-color:rgb(51, 58, 51) !important;color:#221C26  !important}</style>
  
    
  

  
  <title>HTTP访问控制(CORS) - HTTP | MDN</title>

  <meta name="viewport" content="width=device-width, initial-scale=1">
  <meta name="robots" content="index, follow">
  <link rel="home" href="https://developer.mozilla.org/zh-CN/">
  <link rel="copyright" href="https://developer.mozilla.org/zh-CN/docs/Web/HTTP/Access_control_CORS#copyright">

  
    
    
    <link href="./HTTP访问控制(CORS) - HTTP _ MDN_files/mdn.593f20d8c365.css" rel="stylesheet" type="text/css">

    
  
    <link href="./HTTP访问控制(CORS) - HTTP _ MDN_files/wiki.13dd9abdfb62.css" rel="stylesheet" type="text/css">

    

    


  <!-- common social tags -->
  
  <meta property="og:type" content="website">
  <meta property="og:image" content="https://developer.cdn.mozilla.net/static/img/opengraph-logo.dc4e08e2f6af.png">
  <meta property="og:site_name" content="Mozilla 开发者网络">
  <meta name="twitter:card" content="summary">
  <meta name="twitter:image" content="https://developer.cdn.mozilla.net/static/img/opengraph-logo.dc4e08e2f6af.png">
  <meta name="twitter:site" content="@MozDevNet">
  <meta name="twitter:creator" content="@MozDevNet">

  <link rel="search" type="application/opensearchdescription+xml" href="https://developer.mozilla.org/zh-CN/search/xml" title="Mozilla 开发者网络">

  <!-- third-generation iPad with high-resolution Retina display: -->
  <link rel="apple-touch-icon-precomposed" sizes="144x144" href="https://developer.cdn.mozilla.net/static/img/favicon144.a6e4162070f4.png">
  <!-- iPhone with high-resolution Retina display: -->
  <link rel="apple-touch-icon-precomposed" sizes="114x114" href="https://developer.cdn.mozilla.net/static/img/favicon114.0e9fabd44f85.png">
  <!-- first- and second-generation iPad: -->
  <link rel="apple-touch-icon-precomposed" sizes="72x72" href="https://developer.cdn.mozilla.net/static/img/favicon72.8ff9d87c82a0.png">
  <!-- non-Retina iPhone, iPod Touch, and Android 2.1+ devices: -->
  <link rel="apple-touch-icon-precomposed" href="https://developer.cdn.mozilla.net/static/img/favicon57.a2490b9a2d76.png">
  <!-- basic favicon -->
  
    
  
  <link rel="shortcut icon" href="https://developer.cdn.mozilla.net/static/img/favicon32.e02854fdcf73.png">
  <!--[if IE]>
  <meta http-equiv="imagetoolbar" content="no">
  <script type="text/javascript" src="https://developer.cdn.mozilla.net/static/build/js/html5shiv.3948ccddab6f.js" charset="utf-8"></script>
  <![endif]-->

  
  <link rel="alternate" type="application/json" href="https://developer.mozilla.org/zh-CN/docs/Web/HTTP/Access_control_CORS$json">
  <link rel="canonical" href="https://developer.mozilla.org/zh-CN/docs/Web/HTTP/Access_control_CORS">

  
    
      <link rel="alternate" hreflang="ja" href="https://developer.mozilla.org/ja/docs/HTTP_access_control" title="HTTP アクセス制御 (CORS)">
    
      <link rel="alternate" hreflang="en-US" href="https://developer.mozilla.org/en-US/docs/Web/HTTP/Access_control_CORS" title="HTTP access control (CORS)">
    
      <link rel="alternate" hreflang="zh-TW" href="https://developer.mozilla.org/zh-TW/docs/HTTP/Access_control_CORS" title="HTTP access control (CORS)">
    
      <link rel="alternate" hreflang="fr" href="https://developer.mozilla.org/fr/docs/HTTP/Access_control_CORS" title="Contrôle d&#39;accès HTTP">
    
      <link rel="alternate" hreflang="es" href="https://developer.mozilla.org/es/docs/Web/HTTP/Access_control_CORS" title="Control de acceso HTTP (CORS)">
    
      <link rel="alternate" hreflang="ko" href="https://developer.mozilla.org/ko/docs/Web/HTTP/Access_control_CORS" title="HTTP 접근 제어 (CORS)">
    
  

  <!-- document-specific social tags -->
  <meta property="og:title" content="HTTP访问控制(CORS)">
  <meta property="og:url" content="https://developer.mozilla.org/zh-CN/docs/Web/HTTP/Access_control_CORS">
  <meta name="twitter:url" content="https://developer.mozilla.org/zh-CN/docs/Web/HTTP/Access_control_CORS">
  <meta name="twitter:title" content="HTTP访问控制(CORS)">
  
  <meta property="og:description" content="跨站 HTTP 请求(Cross-site HTTP request)是指发起请求的资源所在域不同于该请求所指向资源所在的域的 HTTP 请求。比如说，域名A(http://domaina.example)的某 Web 应用程序中通过img标签引入了域名B(http://domainb.foo)站点的某图片资源(http://domainb.foo/image.jpg)，域名A的那 Web 应用就会导致浏览器发起一个跨站 HTTP 请求。 在当今的 Web 开发中，使用跨站 HTTP 请求加载各类资源（包括CSS、图片、JavaScript 脚本以及其它类资源），已经成为了一种普遍且流行的方式。">
  <meta name="description" content="跨站 HTTP 请求(Cross-site HTTP request)是指发起请求的资源所在域不同于该请求所指向资源所在的域的 HTTP 请求。比如说，域名A(http://domaina.example)的某 Web 应用程序中通过img标签引入了域名B(http://domainb.foo)站点的某图片资源(http://domainb.foo/image.jpg)，域名A的那 Web 应用就会导致浏览器发起一个跨站 HTTP 请求。 在当今的 Web 开发中，使用跨站 HTTP 请求加载各类资源（包括CSS、图片、JavaScript 脚本以及其它类资源），已经成为了一种普遍且流行的方式。">
  <meta name="twitter:description" content="跨站 HTTP 请求(Cross-site HTTP request)是指发起请求的资源所在域不同于该请求所指向资源所在的域的 HTTP 请求。比如说，域名A(http://domaina.example)的某 Web 应用程序中通过img标签引入了域名B(http://domainb.foo)站点的某图片资源(http://domainb.foo/image.jpg)，域名A的那 Web 应用就会导致浏览器发起一个跨站 HTTP 请求。 在当今的 Web 开发中，使用跨站 HTTP 请求加载各类资源（包括CSS、图片、JavaScript 脚本以及其它类资源），已经成为了一种普遍且流行的方式。">
  


  
    

<script type="text/javascript">

    (function(i,s,o,g,r,a,m){i['GoogleAnalyticsObject']=r;i[r]=i[r]||function(){
    (i[r].q=i[r].q||[]).push(arguments)},i[r].l=1*new Date();a=s.createElement(o),
    m=s.getElementsByTagName(o)[0];a.async=1;a.src=g;m.parentNode.insertBefore(a,m)
    })(window,document,'script','//www.google-analytics.com/analytics.js','ga');

    ga('create', 'UA-36116321-5', 'mozilla.org');
    ga('set', 'anonymizeIp', true);

    

    // dimension9 == "Section editing"
    
        ga('set', 'dimension9', 'Enabled');
    

    (function() {
        // http://cfsimplicity.com/61/removing-analytics-clutter-from-campaign-urls
        var win = window;
        var removeUtms = function(){
            var location = win.location;
            if (location.href.indexOf('utm') != -1 && win.history.replaceState) {
                win.history.replaceState({}, '', location.pathname);
            }
        };

        ga('send', 'pageview', {'hitCallback': removeUtms});
    })();
</script>

  
<script async="" data-manual="true" src="./HTTP访问控制(CORS) - HTTP _ MDN_files/syntax-prism.7a66ddfa68bf.js"></script></head><div id="cyeBlackMaskLayer" style="position: fixed; width: 1980px; height: 1080px; z-index: -2147483648; background-color: rgb(19, 19, 19);"></div>
<body data-slug="Web/HTTP/Access_control_CORS" contextmenu="edit-history-menu" data-search-url="" class="document  ">

  <script type="text/javascript">
    (function(win) {
        'use strict';

        
            (function(){
  var FLAGS = {
    'compat_api': false,'kumaediting': false,'page_move': false,'registration_disabled': false,'search_suggestions': false,'section_edit': true,'spam_admin_override': false,'spam_checks_enabled': true,'spam_spammer_override': false,'spam_submissions_enabled': false,'spam_testing_mode': false,'wiki_samples': true,'wiki_spam_exempted': false,'wiki_spam_training': false
    },
    SWITCHES = {
    'wiki_error_on_delete': false,'wiki_force_immediate_rendering': false,'enable_optimizely': false,'welcome_email': true,'application_ACAO': true,'store_revision_ips': true,'dumb_doc_urls': true
    },
    SAMPLES = {
    
    };
  window.waffle = {
    "flag_is_active": function waffle_flag(flag_name) {
      
      return !!FLAGS[flag_name];
    },
    "switch_is_active": function waffle_switch(switch_name) {
      
      return !!SWITCHES[switch_name];
    },
    "sample_is_active": function waffle_sample(sample_name) {
      
      return !!SAMPLES[sample_name];
    },
    "FLAGS": FLAGS,
    "SWITCHES": SWITCHES,
    "SAMPLES": SAMPLES
  };
})();

        

        // This needs to be set before ckeditor.js loads
        window.CKEDITOR_BASEPATH = '/static/js/libs/ckeditor/build/ckeditor/';

        // This represents the site configuration
        win.mdn = {
            // Properties and settings for CKEditor will go here
            ckeditor: {},
            // Feature test results and methods will be placed here
            features: {},
            // The path to static assets (images, CSS, JS) in MDN
            staticPath: 'https://developer.cdn.mozilla.net/static/',
            // Optimizely API
            optimizely: win['optimizely'] || [],
            // Site notifications
            
            notifications: [],
            
            // Wiki-specific settings will be placed here
            wiki: {
                autosuggestTitleUrl: '/zh-CN/docs/get-documents'
            },
            // Assets that need to be dynamically injected
            assets: {
                css: {
                    'editor-content': ['https://developer.cdn.mozilla.net/static/build/styles/editor-content.3d79df72080d.css',],
                    'wiki-compat-tables': ['https://developer.cdn.mozilla.net/static/build/styles/wiki-compat-tables.f3a3bfce97a1.css',]
                },
                js: {
                    'syntax-prism': ['https://developer.cdn.mozilla.net/static/build/js/syntax-prism.7a66ddfa68bf.js',],
                    'wiki-compat-tables': ['https://developer.cdn.mozilla.net/static/build/js/wiki-compat-tables.14ce5dcb2c3d.js',]
                }
            }
        };
    })(this);
</script>

  

  <ul id="nav-access">
    <li><a href="https://developer.mozilla.org/zh-CN/docs/Web/HTTP/Access_control_CORS#document-main" id="skip-main">跳到主要内容</a></li>
    <li><a id="skip-language" href="https://developer.mozilla.org/zh-CN/docs/Web/HTTP/Access_control_CORS#language">选择语言</a></li>
    
      <li><a href="https://developer.mozilla.org/zh-CN/docs/Web/HTTP/Access_control_CORS#q" id="skip-search">跳到搜索</a></li>
    
  </ul>

  <!-- Header -->
  <header id="main-header"><div class="center">

    <div id="tabzilla">
        <a href="https://www.mozilla.org/" class="no-track">mozilla</a>
    </div>

    <div class="clear header-clear"></div>


    <a href="https://developer.mozilla.org/zh-CN/" class="logo">Mozilla 开发者网络</a>


    <div id="nav-sec">
        
                  <ul>
                  <li>

    

    <form>
      <div class="oauth-login-container">
          <div class="oauth-login-options" tabindex="0">
              <span class="oauth-login-options-text">
                登录
              </span>
              <span class="oauth-icon oauth-github" data-service="GitHub" data-href="/users/github/login/?next=%2Fzh-CN%2Fdocs%2FWeb%2FHTTP%2FAccess_control_CORS" title="GitHub"><i class="icon-github" aria-hidden="true"></i></span>
              <span class="oauth-icon oauth-persona launch-persona-login wait-for-persona" data-service="Persona" data-next="/zh-CN/docs/Web/HTTP/Access_control_CORS" title="Persona"><i class="icon-user" aria-hidden="true"></i></span>
          </div>
          <div class="oauth-login-picker" aria-hidden="true">
              <ul>
                  <li class="wait-for-persona"><a href="https://developer.mozilla.org/zh-CN/users/signin" class="login-link launch-persona-login" data-next="/zh-CN/docs/Web/HTTP/Access_control_CORS" data-service="Persona"><i class="icon-user" aria-hidden="true"></i>Persona</a></li>
                  <li><a href="https://developer.mozilla.org/users/github/login/?next=%2Fzh-CN%2Fdocs%2FWeb%2FHTTP%2FAccess_control_CORS" class="login-link" data-service="GitHub"><i class="icon-github" aria-hidden="true"></i>GitHub</a></li>
              </ul>
              
          </div>
      </div>
    </form>
</li>
                </ul>
        
    </div>

    <nav id="main-nav" role="navigation"><ul><li><a href="https://developer.mozilla.org/zh-CN/docs/Web">网络平台<i aria-hidden="true" class="icon-caret-down"></i></a>

        <div class="submenu submenu-cols-2 js-submenu" id="nav-platform-submenu">
          <div class="submenu-column">
            <div class="title">技术</div>
            <ul>
              <li><a href="https://developer.mozilla.org/zh-CN/docs/Web/HTML">HTML</a></li>
              <li><a href="https://developer.mozilla.org/zh-CN/docs/Web/CSS">CSS</a></li>
              <li><a href="https://developer.mozilla.org/zh-CN/docs/Web/JavaScript">JavaScript</a></li>
              <li><a href="https://developer.mozilla.org/zh-CN/docs/Web/Guide/Graphics">图像</a></li>
              <li><a href="https://developer.mozilla.org/zh-CN/docs/Web/API">API / DOM</a></li>
              <li><a href="https://developer.mozilla.org/zh-CN/docs/Web/Apps">应用</a></li>
              <li><a href="https://developer.mozilla.org/zh-CN/docs/Web/MathML">MathML</a></li>
            </ul>
          </div><div class="submenu-column last">
            <div class="title">参考和指引</div>
            <ul>
              <li><a href="https://developer.mozilla.org/zh-CN/docs/Learn">了解 Web</a></li>
              <li><a href="https://developer.mozilla.org/zh-CN/docs/Web/Tutorials">教程</a></li>
              <li><a href="https://developer.mozilla.org/zh-CN/docs/Web/Reference">参考文献</a></li>
              <li><a href="https://developer.mozilla.org/zh-CN/docs/Web/Guide">开发者指南</a></li>
              <li><a href="https://developer.mozilla.org/zh-CN/docs/Web/Accessibility">无障碍环境</a></li>
              <li><a href="https://developer.mozilla.org/zh-CN/docs/Web">...更多文档</a></li>
            </ul>
          </div>
        </div>
      </li><li><a href="https://developer.mozilla.org/zh-CN/docs/Zones">Mozilla 文档<i aria-hidden="true" class="icon-caret-down"></i></a>

        <div class="submenu js-submenu" id="nav-zones-submenu">
          <div class="submenu-column">
            <ul>
              <li><a href="https://developer.mozilla.org/zh-CN/docs/Mozilla/Add-ons">附加组件</a></li>
              <li><a href="https://developer.mozilla.org/zh-CN/docs/Mozilla/Firefox">Firefox</a></li>
              <li><a href="https://developer.mozilla.org/zh-CN/docs/Mozilla/Marketplace">火狐应用市场</a></li>
              <li><a href="https://developer.mozilla.org/zh-CN/docs/Mozilla/B2G_OS">B2G OS</a></li>
              <li><a href="https://developer.mozilla.org/zh-CN/docs/Persona">Persona</a></li>
            </ul>
          </div>
        </div>
      </li><li><a href="https://developer.mozilla.org/zh-CN/docs/Tools">开发者工具</a></li><li><a href="https://developer.mozilla.org/zh-CN/docs/MDN/Feedback">反馈<i aria-hidden="true" class="icon-caret-down"></i></a>

        <div class="submenu js-submenu" id="nav-contact-submenu">
          <div class="submenu-column">
            <ul>
                <li><a href="https://support.mozilla.org/">获取 Firefox 帮助<i aria-hidden="true" class="icon-external-link"></i></a></li>
                <li><a href="http://stackoverflow.com/">获取 Web 开发帮助<i aria-hidden="true" class="icon-external-link"></i></a></li>
            </ul>
            <ul>
              <li><a href="https://developer.mozilla.org/zh-CN/docs/MDN/Community">加入 MDN 社区</a></li>
              <li><a href="https://bugzilla.mozilla.org/form.doc">报告内容问题<i aria-hidden="true" class="icon-external-link"></i></a></li>
              <li><a href="https://bugzilla.mozilla.org/form.mdn">报告缺陷<i aria-hidden="true" class="icon-external-link"></i></a></li>
            </ul>
          </div>
        </div>

      </li><li class="nav-search-link"><a href="https://developer.mozilla.org/zh-CN/search" title="Search"><i aria-hidden="true" class="icon-search"></i></a></li><li class="main-nav-search"><form action="https://developer.mozilla.org/zh-CN/search" method="get" role="search">
        <div class="search-wrap">
          <label for="main-q" class="offscreen">搜索</label>
          <input type="search" id="main-q" name="q" placeholder="搜索" data-value="" value="">
          <span class="search-trigger"><i aria-hidden="true" class="icon-search"></i></span>&nbsp;
          <button type="submit" class="offscreen">搜索</button>
        </div>
      </form></li></ul></nav>
  </div></header>

  <!-- Content will go here -->
  <main id="content"><div class="center clear">
  

   <!-- end is_zone -->


    <div class="wiki-main-content" id="document-main" role="main"><div class="center">
      
      <div class="article-meta">
        <!-- action buttons -->
        

  
    
    
  

  
    
  

  

  <ul class="page-buttons" data-sticky="false">
      
      <li><button id="languages-menu" class="transparent" aria-haspopup="true" aria-owns="languages-menu-submenu" aria-expanded="false"><span>语言</span><i aria-hidden="true" class="icon-language"></i></button>

        <div class="submenu js-submenu" id="languages-menu-submenu">
          <div class="submenu-column">
            <ul id="translations">
              
                
                  <li><bdi><a rel="internal" href="https://developer.mozilla.org/ja/docs/HTTP_access_control" title="HTTP アクセス制御 (CORS)">日本語</a></bdi></li>
                
                  <li><bdi><a rel="internal" href="https://developer.mozilla.org/en-US/docs/Web/HTTP/Access_control_CORS" title="HTTP access control (CORS)">English (US)</a></bdi></li>
                
                  <li><bdi><a rel="internal" href="https://developer.mozilla.org/zh-TW/docs/HTTP/Access_control_CORS" title="HTTP access control (CORS)">正體中文 (繁體)</a></bdi></li>
                
                  <li><bdi><a rel="internal" href="https://developer.mozilla.org/fr/docs/HTTP/Access_control_CORS" title="Contrôle d&#39;accès HTTP">Français</a></bdi></li>
                
                  <li><bdi><a rel="internal" href="https://developer.mozilla.org/es/docs/Web/HTTP/Access_control_CORS" title="Control de acceso HTTP (CORS)">Español</a></bdi></li>
                
                  <li><bdi><a rel="internal" href="https://developer.mozilla.org/ko/docs/Web/HTTP/Access_control_CORS" title="HTTP 접근 제어 (CORS)">한국어</a></bdi></li>
                
              

              
            </ul>
          </div>
        </div>
      </li>

      <li class="page-buttons-edit"><a href="https://developer.mozilla.org/zh-CN/docs/Web/HTTP/Access_control_CORS$edit" class="button" data-optimizely-hook="button-edit-doc" id="edit-button">编辑<i aria-hidden="true" class="icon-pencil"></i></a></li>

        

        <li><button id="advanced-menu" class="only-icon" aria-haspopup="true" aria-owns="advanced-menu-submenu" aria-expanded="false"><span>高级</span><i aria-hidden="true" class="icon-cog"></i></button>
        <div class="submenu js-submenu" id="advanced-menu-submenu">
          <!-- this page -->
          <div class="submenu-column">
            <div class="title">高级</div>
            <ul>
                <li><a href="https://developer.mozilla.org/zh-CN/docs/Web/HTTP/Access_control_CORS$history" rel="nofollow, noindex">历史记录</a></li>
                
                
                
                


                

                
                
                
                <li class="page-print"><a href="https://developer.mozilla.org/zh-CN/docs/Web/HTTP/Access_control_CORS#" onclick="return window.print();">打印此文章</a></li>
            </ul>
          </div>
        </div>
  </li></ul>

        <!-- crumbs -->
        
  <nav class="crumbs" role="navigation"><ol xmlns:v="http://rdf.data-vocabulary.org/#" aria-label="面包屑导航">
    <li typeof="v:Breadcrumb"><a href="https://developer.mozilla.org/zh-CN" rel="v:url" property="v:title">MDN</a></li>
    
      <li class="crumb" typeof="v:Breadcrumb"><a href="https://developer.mozilla.org/zh-CN/docs/Web" rel="v:url" property="v:title">Web 技术文档</a></li>
    
      <li class="crumb" typeof="v:Breadcrumb"><a href="https://developer.mozilla.org/zh-CN/docs/Web/HTTP" rel="v:url" property="v:title">HTTP</a></li>
    
    <li class="crumb" typeof="v:Breadcrumb" property="v:title">HTTP访问控制(CORS)</li>
  </ol></nav>
      </div>

      <!-- heading -->
      <div id="wiki-document-head" class="document-head">
          <span class="from-search-previous-box">
            <a class="button from-search-previous only-icon disabled" title="前一个搜索结果" data-empty-title="没有更靠前的搜索结果"><i aria-hidden="true" class="icon-chevron-left"></i></a>
          </span>
          <span class="from-search-navigate-wrap">
            <a href="https://developer.mozilla.org/zh-CN/docs/Web/HTTP/Access_control_CORS#" class="from-search-navigate"><span class="from-search-navigate-up"><i aria-hidden="true" class="icon-double-angle-up"></i></span><span class="from-search-navigate-down"><i aria-hidden="true" class="icon-double-angle-down"></i></span></a>
          </span>
          <div class="from-search-toc submenu">
            <span class="title">您的搜索结果</span>
            <ol></ol>
          </div>
          <span class="from-search-next-box">
            <a class="button from-search-next only-icon disabled" title="后一个搜索结果" data-empty-title="没有更靠前的搜索结果"><i aria-hidden="true" class="icon-chevron-right"></i></a>
          </span>

        
        <div class="contributor-avatars" data-all-text="查看所有贡献者" data-alternate-message="隐藏贡献者" data-has-hidden="1">
            <ul>
            
                <li class="shown">
                <a href="https://developer.mozilla.org/zh-CN/profiles/ybwdaisy" title="查看个人资料：ybwdaisy">
                <img src="./HTTP访问控制(CORS) - HTTP _ MDN_files/92e05031ed81beab6ec2a139a81de1b2" class="avatar loaded" height="34" width="34" alt="ybwdaisy"></a>
                </li>
            
                <li class="shown">
                <a href="https://developer.mozilla.org/zh-CN/profiles/fjywan" title="查看个人资料：fjywan">
                <img src="./HTTP访问控制(CORS) - HTTP _ MDN_files/d11cec1864a80ce7c11b7d89bd582bcc" class="avatar loaded" height="34" width="34" alt="fjywan"></a>
                </li>
            
                <li class="shown">
                <a href="https://developer.mozilla.org/zh-CN/profiles/holynewbie" title="查看个人资料：holynewbie">
                <img src="./HTTP访问控制(CORS) - HTTP _ MDN_files/b58129beeb330ab1ad602d63fe867d63" class="avatar loaded" height="34" width="34" alt="holynewbie"></a>
                </li>
            
                <li class="shown">
                <a href="https://developer.mozilla.org/zh-CN/profiles/gqqnbig" title="查看个人资料：gqqnbig">
                <img src="./HTTP访问控制(CORS) - HTTP _ MDN_files/cab04a8efb05937830be8df8a033e5fd" class="avatar loaded" height="34" width="34" alt="gqqnbig"></a>
                </li>
            
                <li class="shown">
                <a href="https://developer.mozilla.org/zh-CN/profiles/EdwardStudy" title="查看个人资料：EdwardStudy">
                <img src="./HTTP访问控制(CORS) - HTTP _ MDN_files/0534b189163b9c6d3fa42b354e2e6f59" class="avatar loaded" height="34" width="34" alt="EdwardStudy"></a>
                </li>
            
                <li class="shown">
                <a href="https://developer.mozilla.org/zh-CN/profiles/ssjssh" title="查看个人资料：ssjssh">
                <img src="./HTTP访问控制(CORS) - HTTP _ MDN_files/8607364b5988ba58f741b229bb8dee82" class="avatar loaded" height="34" width="34" alt="ssjssh"></a>
                </li>
            
                <li class="hidden">
                <a href="https://developer.mozilla.org/zh-CN/profiles/Kevin-Xi" title="查看个人资料：Kevin-Xi">
                <noscript data-width="34" data-height="34" data-class="avatar" data-alt="Kevin-Xi" data-src="https://secure.gravatar.com/avatar/03ba69893c145c4597863ae5bb9fc3e7?s=34&amp;r=pg&amp;d=https%3A%2F%2Fdeveloper.cdn.mozilla.net%2Fmedia%2Fimg%2Favatar.png">Kevin-Xi</noscript></a>
                </li>
            
                <li class="hidden">
                <a href="https://developer.mozilla.org/zh-CN/profiles/8427003" title="查看个人资料：8427003">
                <noscript data-width="34" data-height="34" data-class="avatar" data-alt="8427003" data-src="https://secure.gravatar.com/avatar/7ad18dbb1ed3036258e5d0a49622317c?s=34&amp;r=pg&amp;d=https%3A%2F%2Fdeveloper.cdn.mozilla.net%2Fmedia%2Fimg%2Favatar.png">8427003</noscript></a>
                </li>
            
                <li class="hidden">
                <a href="https://developer.mozilla.org/zh-CN/profiles/Meteormatt" title="查看个人资料：Meteormatt">
                <noscript data-width="34" data-height="34" data-class="avatar" data-alt="Meteormatt" data-src="https://secure.gravatar.com/avatar/faffbfaed0e1fd0d47fff3e1f0093410?s=34&amp;r=pg&amp;d=https%3A%2F%2Fdeveloper.cdn.mozilla.net%2Fmedia%2Fimg%2Favatar.png">Meteormatt</noscript></a>
                </li>
            
                <li class="hidden">
                <a href="https://developer.mozilla.org/zh-CN/profiles/OOP-Code-Bunny" title="查看个人资料：OOP-Code-Bunny">
                <noscript data-width="34" data-height="34" data-class="avatar" data-alt="OOP-Code-Bunny" data-src="https://secure.gravatar.com/avatar/f4e7f94c5d9f57ee5678474b97e9b375?s=34&amp;r=pg&amp;d=https%3A%2F%2Fdeveloper.cdn.mozilla.net%2Fmedia%2Fimg%2Favatar.png">OOP-Code-Bunny</noscript></a>
                </li>
            
                <li class="hidden">
                <a href="https://developer.mozilla.org/zh-CN/profiles/CManLH" title="查看个人资料：CManLH">
                <noscript data-width="34" data-height="34" data-class="avatar" data-alt="CManLH" data-src="https://secure.gravatar.com/avatar/9330807f8111a5030d9f75462b0057be?s=34&amp;r=pg&amp;d=https%3A%2F%2Fdeveloper.cdn.mozilla.net%2Fmedia%2Fimg%2Favatar.png">CManLH</noscript></a>
                </li>
            
                <li class="hidden">
                <a href="https://developer.mozilla.org/zh-CN/profiles/qiumaoyuan" title="查看个人资料：qiumaoyuan">
                <noscript data-width="34" data-height="34" data-class="avatar" data-alt="qiumaoyuan" data-src="https://secure.gravatar.com/avatar/e2697283d10accde746a5276b5f9893b?s=34&amp;r=pg&amp;d=https%3A%2F%2Fdeveloper.cdn.mozilla.net%2Fmedia%2Fimg%2Favatar.png">qiumaoyuan</noscript></a>
                </li>
            
            </ul>
        <button id="contributors-toggle" type="button" class="transparent" data-alternate-message="隐藏贡献者">查看所有贡献者</button></div>
        

        <h1>HTTP访问控制(CORS)</h1>

      </div>
      

      <!-- start the main content container -->
        <div id="wiki-column-container" class="wiki-right-present wiki-left-closed wiki-left-none">

          <!-- content row with three strips -->
          <div class="column-container column-container-reverse">

            
              <!-- TOC, approvals, etc -->
              <div class="column-strip wiki-column" id="wiki-right">
              
              <!-- table of contents -->
              <div id="toc" class="toc toggleable" style="width: auto; max-height: none;">
                <a href="https://developer.mozilla.org/zh-CN/docs/Web/HTTP/Access_control_CORS#toc" class="title toggler" data-open-icon="icon-plus" data-closed-icon="icon-minus" aria-haspopup="true">在本文章中<i class="icon-minus"></i></a>
                <ol class="toggle-container">
                  <li><a rel="internal" href="https://developer.mozilla.org/zh-CN/docs/Web/HTTP/Access_control_CORS#概述">概述</a></li><li><a rel="internal" href="https://developer.mozilla.org/zh-CN/docs/Web/HTTP/Access_control_CORS#一些访问控制场景">一些访问控制场景</a><ol><li><a rel="internal" href="https://developer.mozilla.org/zh-CN/docs/Web/HTTP/Access_control_CORS#简单请求">简单请求</a></li><li><a rel="internal" href="https://developer.mozilla.org/zh-CN/docs/Web/HTTP/Access_control_CORS#预请求">预请求</a></li><li><a rel="internal" href="https://developer.mozilla.org/zh-CN/docs/Web/HTTP/Access_control_CORS#附带凭证信息的请求">附带凭证信息的请求</a></li></ol></li><li><a rel="internal" href="https://developer.mozilla.org/zh-CN/docs/Web/HTTP/Access_control_CORS#HTTP响应头">HTTP响应头</a><ol><li><a rel="internal" href="https://developer.mozilla.org/zh-CN/docs/Web/HTTP/Access_control_CORS#Access-Control-Allow-Origin">Access-Control-Allow-Origin</a></li><li><a rel="internal" href="https://developer.mozilla.org/zh-CN/docs/Web/HTTP/Access_control_CORS#Access-Control-Expose-Headers">Access-Control-Expose-Headers</a></li><li><a rel="internal" href="https://developer.mozilla.org/zh-CN/docs/Web/HTTP/Access_control_CORS#Access-Control-Max-Age">Access-Control-Max-Age</a></li><li><a rel="internal" href="https://developer.mozilla.org/zh-CN/docs/Web/HTTP/Access_control_CORS#Access-Control-Allow-Credentials">Access-Control-Allow-Credentials</a></li><li><a rel="internal" href="https://developer.mozilla.org/zh-CN/docs/Web/HTTP/Access_control_CORS#Access-Control-Allow-Methods">Access-Control-Allow-Methods</a></li><li><a rel="internal" href="https://developer.mozilla.org/zh-CN/docs/Web/HTTP/Access_control_CORS#Access-Control-Allow-Headers">Access-Control-Allow-Headers</a></li></ol></li><li><a rel="internal" href="https://developer.mozilla.org/zh-CN/docs/Web/HTTP/Access_control_CORS#HTTP_请求头">HTTP 请求头</a><ol><li><a rel="internal" href="https://developer.mozilla.org/zh-CN/docs/Web/HTTP/Access_control_CORS#Origin">Origin</a></li><li><a rel="internal" href="https://developer.mozilla.org/zh-CN/docs/Web/HTTP/Access_control_CORS#Access-Control-Request-Method">Access-Control-Request-Method</a></li><li><a rel="internal" href="https://developer.mozilla.org/zh-CN/docs/Web/HTTP/Access_control_CORS#Access-Control-Request-Headers">Access-Control-Request-Headers</a></li></ol></li><li><a rel="internal" href="https://developer.mozilla.org/zh-CN/docs/Web/HTTP/Access_control_CORS#浏览器支持">浏览器支持</a><ol><li><ol><li><a rel="internal" href="https://developer.mozilla.org/zh-CN/docs/Web/HTTP/Access_control_CORS#注意：">注意：</a></li></ol></li></ol></li><li><a rel="internal" href="https://developer.mozilla.org/zh-CN/docs/Web/HTTP/Access_control_CORS#相关链接">相关链接</a>
                </li></ol>
              </div>
              
              </div>
            

            
            
              
            

            <!-- center: main article content -->
            <div id="wiki-content" class="column-main wiki-column text-content">

              

              

              
                
                
                
              
              

              <!-- just the article content -->
              <article id="wikiArticle">
                
                  
                    <p><font>跨站 HTTP 请求(Cross-site HTTP request)是指发起请求的资源所在域不同于该请求所指向资源所在的域的 </font><a title="en/HTTP" href="https://developer.mozilla.org/en/HTTP"><font>HTTP </font></a><font>请求。比如说，域名A(http://domaina.example)的某 Web 应用程序中通过&lt;img&gt;标签引入了域名B(http://domainb.foo)站点的某图片资源(http://domainb.foo/image.jpg)，域名A的那 Web 应用就会导致浏览器发起一个跨站 HTTP 请求。</font>在当今的 Web 开发中，使用跨站 HTTP 请求加载各类资源（包括CSS、图片、JavaScript 脚本以及其它类资源），已经成为了一种普遍且流行的方式。</p>

<p>正如大家所知，出于安全考虑，浏览器会限制脚本中发起的跨站请求。比如，使用<a title="en/XMLHttpRequest" class="internal" href="https://developer.mozilla.org/en/DOM/XMLHttpRequest"><code> XMLHttpRequest</code></a> 对象发起 HTTP 请求就必须遵守<a title="En/Same origin policy for JavaScript" class="internal" href="https://developer.mozilla.org/en/Same_origin_policy_for_JavaScript">同源策略</a>。 具体而言，Web 应用程序能且只能使用 <a title="en/XMLHttpRequest" class="internal" href="https://developer.mozilla.org/en/DOM/XMLHttpRequest"><code>XMLHttpRequest</code></a> 对象向其加载的源域名发起 HTTP 请求，而不能向任何其它域名发起请求。为了能开发出更强大、更丰富、更安全的Web应用程序，开发人员渴望着在不丢失安全的前提下，Web 应用技术能越来越强大、越来越丰富。比如，可以使用 <code><a title="En/XMLHttpRequest" class="internal" href="https://developer.mozilla.org/en/DOM/XMLHttpRequest">XMLHttpRequest</a></code> 发起跨站 HTTP 请求。（<strong>这段描述跨域不准确，跨域并非浏览器限制了发起跨站请求，而是跨站请求可以正常发起，但是返回结果被浏览器拦截了。最好的例子是CSRF跨站攻击原理，请求是发送到了后端服务器无论是否跨域！注意：有些浏览器不允许从HTTPS的域跨域访问HTTP，比如Chrome和Firefox，这些浏览器在请求还未发出的时候就会拦截请求，这是一个特例。</strong>）</p>

<p>隶属于 <a title="http://www.w3.org/" class="external-icon external" href="http://www.w3.org/">W3C</a> 的 Web 应用工作组( <a title="http://www.w3.org/2008/webapps/" class="external-icon external" href="http://www.w3.org/2008/webapps/">Web Applications Working Group</a> )推荐了一种新的机制，即跨源资源共享（<a title="http://www.w3.org/TR/cors/" class="external-icon external" href="http://www.w3.org/TR/cors/">Cross-Origin Resource Sharing</a> (CORS)）。这种机制让Web应用服务器能支持跨站访问控制，从而使得安全地进行跨站数据传输成为可能。需要特别注意的是，这个规范是针对API容器的。比如说，要使得 <code><a title="En/XMLHttpRequest" class="internal" href="https://developer.mozilla.org/en/DOM/XMLHttpRequest">XMLHttpRequest</a></code> 在现代浏览器中可以发起跨域请求。浏览器必须能支持跨源共享带来的新的组件，包括请求头和策略执行。同样，服务器端则需要解析这些新的请求头，并按照策略返回相应的响应头以及所请求的资源。这篇文章适用于网站管理员、服务器端程序开发人员以及前端开发人员。对于服务器端程序开发人员，还可以阅读补充材料 <a title="En/Server-Side Access Control" class="internal" href="https://developer.mozilla.org/En/Server-Side_Access_Control">cross-origin sharing from a server perspective (with PHP code snippets)</a> 。</p>

<p>跨源资源共享标准( <a title="http://www.w3.org/TR/cors/" class="external-icon external" href="http://www.w3.org/TR/cors/">cross-origin sharing standard</a> ) 使得以下场景可以使用跨站 HTTP 请求：</p>

<ul>
 <li>如上所述，使用 <a title="En/XMLHttpRequest" class="internal" href="https://developer.mozilla.org/en/DOM/XMLHttpRequest"><code>XMLHttpRequest</code></a> 发起跨站 HTTP 请求。</li>
 <li>Web 字体 (CSS 中通过<code> @font-face </code>使用跨站字体资源), <a title="http://www.webfonts.info/wiki/index.php?title=@font-face_support_in_Firefox" class="external-icon external" href="http://www.webfonts.info/wiki/index.php?title=%40font-face_support_in_Firefox">因此，网站就可以发布 TrueType 字体资源，并只允许已授权网站进行跨站调用</a>。</li>
 <li>WebGL 贴图</li>
 <li>使用 drawImage API 在 canvas 上画图</li>
</ul>

<p>接下来的文章，会对跨源资源共享做一个总览，并介绍下在 Firefox 3.5 中已实现的跨源资源共享所使用的 HTTP 头。</p>

<h2 id="概述">概述<a href="https://developer.mozilla.org/zh-CN/docs/Web/HTTP/Access_control_CORS$edit#概述" class="button section-edit only-icon"><i aria-hidden="true" class="icon-pencil"></i><span>Edit</span></a></h2>

<p>跨源资源共享标准通过新增一系列 HTTP 头，让服务器能声明哪些来源可以通过浏览器访问该服务器上的资源。另外，对那些会对服务器数据造成破坏性影响的 HTTP 请求方法（特别是 GET 以外的 HTTP 方法，或者搭配某些MIME类型的POST请求），标准强烈要求浏览器必须先以<code> OPTIONS</code> 请求方式发送一个预请求(preflight request)，从而获知服务器端对跨源请求所支持 HTTP 方法。在确认服务器允许该跨源请求的情况下，以实际的 HTTP 请求方法发送那个真正的请求。服务器端也可以通知客户端，是不是需要随同请求一起发送信用信息（包括 Cookies 和 HTTP 认证相关数据）。</p>

<p>随后的章节，将对相关情景及用到的 HTTP 请求进行讨论。</p>

<h2 id="一些访问控制场景">一些访问控制场景<a href="https://developer.mozilla.org/zh-CN/docs/Web/HTTP/Access_control_CORS$edit#一些访问控制场景" class="button section-edit only-icon"><i aria-hidden="true" class="icon-pencil"></i><span>Edit</span></a></h2>

<p>在此，我们会用三个场景来解释跨源共享是怎么运行的。其中，所有的跨站请求都是通过 <code><a title="En/XMLHttpRequest" class="internal" href="https://developer.mozilla.org/en/DOM/XMLHttpRequest">XMLHttpRequest</a></code> 对象发起。</p>

<p>如果对以下章节中的 JavaScript 代码片段感兴趣，可以访问<a title="http://arunranga.com/examples/access-control/" class="external external-icon" href="http://arunranga.com/examples/access-control/">这儿</a>。在所有支持跨站<code><a title="En/XMLHttpRequest" class="internal" href="https://developer.mozilla.org/en/DOM/XMLHttpRequest"> XMLHttpRequest</a> 请求的浏览中，可以看到实际运行效果。而如果想继续了解服务器端对跨源请求的处理，则可以访问<a title="En/Server-Side Access Control" class="internal" href="https://developer.mozilla.org/En/Server-Side_Access_Control">这儿</a>。</code></p>

<h3 id="简单请求">简单请求</h3>

<p>所谓的简单，是指：</p>

<ul>
 <li>只使用 GET, HEAD 或者 POST 请求方法。如果使用 POST 向服务器端传送数据，则数据类型(Content-Type)只能是 <code>application/x-www-form-urlencoded</code>, <code>multipart/form-data 或 text/plain</code>中的一种。</li>
 <li>不会使用自定义请求头（类似于 X-Modified 这种）。</li>
</ul>

<div class="note"><strong>Note:</strong> 这些跨站请求与以往浏览器发出的跨站请求并无异同。并且，如果服务器不给出适当的响应头，则不会有任何数据返回给请求方。因此，那些不允许跨站请求的网站无需为这一新的 HTTP 访问控制特性担心。</div>

<p>比如说，假如站点 http://foo.example 的网页应用想要访问 http://bar.other 的资源。以下的 JavaScript 代码应该会在 foo.example 上执行：</p>

<pre id="line1" class="brush: js line-numbers  language-js"><code class=" language-js"><span class="token keyword">var</span> invocation <span class="token operator">=</span> <span class="token keyword">new</span> <span class="token class-name">XMLHttpRequest</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
<span class="token keyword">var</span> url <span class="token operator">=</span> <span class="token string">'http://bar.other/resources/public-data/'</span><span class="token punctuation">;</span>
   
<span class="token keyword">function</span> <span class="token function">callOtherDomain</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
  <span class="token keyword">if</span><span class="token punctuation">(</span>invocation<span class="token punctuation">)</span> <span class="token punctuation">{</span>    
    invocation<span class="token punctuation">.</span><span class="token function">open</span><span class="token punctuation">(</span><span class="token string">'GET'</span><span class="token punctuation">,</span> url<span class="token punctuation">,</span> <span class="token keyword">true</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
    invocation<span class="token punctuation">.</span>onreadystatechange <span class="token operator">=</span> handler<span class="token punctuation">;</span>
    invocation<span class="token punctuation">.</span><span class="token function">send</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span> 
  <span class="token punctuation">}</span>
<span class="token punctuation">}</span><span class="line-numbers-rows"><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span></span></code></pre>

<p>让我们看看，在这个场景中，浏览器会发送什么的请求到服务器，而服务器又会返回什么给浏览器：</p>

<pre class="brush: shell line-numbers  language-shell"><code class=" language-shell">GET /resources/public-data/ HTTP/1.1
Host: bar.other
User-Agent: Mozilla/5.0 (Macintosh; U; Intel Mac OS X 10.5; en-US; rv:1.9.1b3pre) Gecko/20081130 Minefield/3.1b3pre
Accept: text/html,application/xhtml+xml,application/xml;q=0.9,*/*;q=0.8
Accept-Language: en-us,en;q=0.5
Accept-Encoding: gzip,deflate
Accept-Charset: ISO-8859-1,utf-8;q=0.7,*;q=0.7
Connection: keep-alive
Referer: http://foo.example/examples/access-control/simpleXSInvocation.html
Origin: http://foo.example


HTTP/1.1 200 OK
Date: Mon, 01 Dec 2008 00:23:53 GMT
Server: Apache/2.0.61 
Access-Control-Allow-Origin: *
Keep-Alive: timeout=2, max=100
Connection: Keep-Alive
Transfer-Encoding: chunked
Content-Type: application/xml

[XML Data]<span class="line-numbers-rows"><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span></span></code></pre>

<p>第 1~10 行是 Firefox 3.5 发出的请求头。注意看第10行的请求头 Origin，它表明了该请求来自于 http://foo.exmaple。</p>

<p>第 13~22 行则是 http://bar.other 服务器的响应。如第16行所示，服务器返回了响应头 Access-Control-Allow-Origin: *，这表明服务器接受来自任何站点的跨站请求。如果服务器端仅允许来自 http://foo.example 的跨站请求，它可以返回：</p>

<p>Access-Control-Allow-Origin: http://foo.example</p>

<p>现在，除了 http://foo.example，其它站点就不能跨站访问 http://bar.other 的资源了。</p>

<p>如上，通过使用 Origin 和 Access-Control-Allow-Origin 就可以完成最简单的跨站请求。不过 Access-Control-Allow-Origin 需要为 * 或者包含由 Origin 指明的站点。</p>

<h3 id="预请求">预请求</h3>

<p>不同于上面讨论的简单请求，“预请求”要求必须先发送一个 OPTIONS 请求给目的站点，来查明这个跨站请求对于目的站点是不是安全可接受的。这样做，是因为跨站请求可能会对目的站点的数据造成破坏。 当请求具备以下条件，就会被当成预请求处理：</p>

<ul>
 <li>请求以 GET, HEAD 或者 POST 以外的方法发起请求。或者，使用 POST，但请求数据为 <code>application/x-www-form-urlencoded<code>, multipart/form-data 或者 </code><code>text/plain</code></code> 以外的数据类型。比如说，用 POST 发送数据类型为 <code>application/xml 或者 text/xml 的 XML 数据的请求。</code></li>
 <li>使用自定义请求头（比如添加诸如 X-PINGOTHER）</li>
</ul>

<div class="note">
<p><strong>Note:</strong> 从<span title="(Firefox 4 / Thunderbird 3.3 / SeaMonkey 2.1)">Gecko&nbsp;2.0</span>开始，<code>text/plain, </code><code>application/x-www-form-urlencoded 和 multipart/form-data</code> 类型的数据都可以直接用于跨站请求，而不需要先发起“预请求”了。之前，只有<code> text/plain</code> 可以不用先发起“预请求”，进行跨站请求。</p>
</div>

<p>示例如下：</p>

<pre id="line1" class="brush: js line-numbers  language-js"><code class=" language-js"><span class="token keyword">var</span> invocation <span class="token operator">=</span> <span class="token keyword">new</span> <span class="token class-name">XMLHttpRequest</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
<span class="token keyword">var</span> url <span class="token operator">=</span> <span class="token string">'http://bar.other/resources/post-here/'</span><span class="token punctuation">;</span>
<span class="token keyword">var</span> body <span class="token operator">=</span> <span class="token string">'{C}{C}{C}{C}{C}{C}{C}{C}{C}{C}Arun'</span><span class="token punctuation">;</span>
    
<span class="token keyword">function</span> <span class="token function">callOtherDomain</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">{</span>
  <span class="token keyword">if</span><span class="token punctuation">(</span>invocation<span class="token punctuation">)</span>
    <span class="token punctuation">{</span>
      invocation<span class="token punctuation">.</span><span class="token function">open</span><span class="token punctuation">(</span><span class="token string">'POST'</span><span class="token punctuation">,</span> url<span class="token punctuation">,</span> <span class="token keyword">true</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
      invocation<span class="token punctuation">.</span><span class="token function">setRequestHeader</span><span class="token punctuation">(</span><span class="token string">'X-PINGOTHER'</span><span class="token punctuation">,</span> <span class="token string">'pingpong'</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
      invocation<span class="token punctuation">.</span><span class="token function">setRequestHeader</span><span class="token punctuation">(</span><span class="token string">'Content-Type'</span><span class="token punctuation">,</span> <span class="token string">'application/xml'</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
      invocation<span class="token punctuation">.</span>onreadystatechange <span class="token operator">=</span> handler<span class="token punctuation">;</span>
      invocation<span class="token punctuation">.</span><span class="token function">send</span><span class="token punctuation">(</span>body<span class="token punctuation">)</span><span class="token punctuation">;</span> 
    <span class="token punctuation">}</span>

<span class="token punctuation">.</span><span class="token punctuation">.</span><span class="token punctuation">.</span><span class="token punctuation">.</span><span class="token punctuation">.</span><span class="token punctuation">.</span><span class="line-numbers-rows"><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span></span></code></pre>

<p>如上，以 XMLHttpRequest 创建了一个 POST 请求，为该请求添加了一个自定义请求头(X-PINGOTHER: pingpong)，并指定数据类型为 application/xml。所以，该请求是一个“预请求”形式的跨站请求。</p>

<p>让我们看看服务器与浏览器之间具体的交互过程：</p>

<pre class="brush: shell line-numbers  language-shell"><code class=" language-shell">OPTIONS /resources/post-here/ HTTP/1.1
Host: bar.other
User-Agent: Mozilla/5.0 (Macintosh; U; Intel Mac OS X 10.5; en-US; rv:1.9.1b3pre) Gecko/20081130 Minefield/3.1b3pre
Accept: text/html,application/xhtml+xml,application/xml;q=0.9,*/*;q=0.8
Accept-Language: en-us,en;q=0.5
Accept-Encoding: gzip,deflate
Accept-Charset: ISO-8859-1,utf-8;q=0.7,*;q=0.7
Connection: keep-alive
Origin: http://foo.example
Access-Control-Request-Method: POST
Access-Control-Request-Headers: X-PINGOTHER


HTTP/1.1 200 OK
Date: Mon, 01 Dec 2008 01:15:39 GMT
Server: Apache/2.0.61 (Unix)
Access-Control-Allow-Origin: http://foo.example
Access-Control-Allow-Methods: POST, GET, OPTIONS
Access-Control-Allow-Headers: X-PINGOTHER
Access-Control-Max-Age: 1728000
Vary: Accept-Encoding, Origin
Content-Encoding: gzip
Content-Length: 0
Keep-Alive: timeout=2, max=100
Connection: Keep-Alive
Content-Type: text/plain

POST /resources/post-here/ HTTP/1.1
Host: bar.other
User-Agent: Mozilla/5.0 (Macintosh; U; Intel Mac OS X 10.5; en-US; rv:1.9.1b3pre) Gecko/20081130 Minefield/3.1b3pre
Accept: text/html,application/xhtml+xml,application/xml;q=0.9,*/*;q=0.8
Accept-Language: en-us,en;q=0.5
Accept-Encoding: gzip,deflate
Accept-Charset: ISO-8859-1,utf-8;q=0.7,*;q=0.7
Connection: keep-alive
X-PINGOTHER: pingpong
Content-Type: text/xml; charset=UTF-8
Referer: http://foo.example/examples/preflightInvocation.html
Content-Length: 55
Origin: http://foo.example
Pragma: no-cache
Cache-Control: no-cache

Arun


HTTP/1.1 200 OK
Date: Mon, 01 Dec 2008 01:15:40 GMT
Server: Apache/2.0.61 (Unix)
Access-Control-Allow-Origin: http://foo.example
Vary: Accept-Encoding, Origin
Content-Encoding: gzip
Content-Length: 235
Keep-Alive: timeout=2, max=99
Connection: Keep-Alive
Content-Type: text/plain

[Some GZIP'd payload]<span class="line-numbers-rows"><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span></span></code></pre>

<p>第1至12行，使用一个 <code>OPTIONS 发送了一个“预请求”。</code>Firefox 3.1 根据请求参数，决定需要发送一个“预请求”，来探明服务器端是否接受后续真正的请求。 OPTIONS 是 HTTP/1.1 里的方法，用来获取更多服务器端的信息，是一个不应该对服务器数据造成影响的方法。 随同 OPTIONS 请求，以下两个请求头一起被发送：</p>

<pre class="line-numbers  language-html"><code class=" language-html">Access-Control-Request-Method: POST
Access-Control-Request-Headers: X-PINGOTHER<span class="line-numbers-rows"><span></span><span></span></span></code></pre>

<p><code>请求头Access-Control-Request-Method</code>可以提醒服务器跨站请求<code>将使用POST方法，而<code><code><code>请求头</code></code>Access-Control-Request-Headers则告知服务器该跨站请求将携带一个自定义请求头<code>X-PINGOTHER。这样，服务器就可以决定，在当前情况下，是否接受该跨站请求访问。</code></code></code></p>

<p>第15至27行是服务器的响应。该响应表明，服务器接受了客服端的跨站请求。具体可以看看第18至21行：</p>

<pre class="line-numbers  language-html"><code class=" language-html">Access-Control-Allow-Origin: http://foo.example
Access-Control-Allow-Methods: POST, GET, OPTIONS
Access-Control-Allow-Headers: X-PINGOTHER
Access-Control-Max-Age: 1728000<span class="line-numbers-rows"><span></span><span></span><span></span><span></span></span></code></pre>

<p>响应头<code>Access-Control-Allow-Methods表明服务器可以接受</code><code>POST</code>, <code>GET和</code> <code>OPTIONS</code>的请求方法。请注意，这个响应头类似于<a title="http://www.w3.org/Protocols/rfc2616/rfc2616-sec14.html#sec14.7" class="external external-icon" href="http://www.w3.org/Protocols/rfc2616/rfc2616-sec14.html#sec14.7">HTTP/1.1 Allow: response header</a>，但仅限于访问控制的场景下。而响应头<code>Access-Control-Allow-Headers则表示服务器接受自定义请求头<code>X-PINGOTHER。</code></code>就像<code>Access-Control-Allow-Methods一样，<code>Access-Control-Allow-Headers允许以逗号分隔，传递一个可接受的自定义请求头列表。最后，</code></code><code>响应头Access-Control-Max-Age告诉浏览器</code>，本次“预请求”的响应结果有效时间是多久。在上面的例子里，1728000秒代表着20天内，浏览器在处理针对该服务器的跨站请求，都可以无需再发送“预请求”，只需根据本次结果进行判断处理。</p>

<h3 id="附带凭证信息的请求">附带凭证信息的请求</h3>

<p><a title="En/XMLHttpRequest" class="internal" href="https://developer.mozilla.org/en/DOM/XMLHttpRequest"><code>XMLHttpRequest</code></a>和访问控制功能，最有趣的特性就是，发送凭证请求（HTTP Cookies和验证信息）的功能。一般而言，对于跨站请求，浏览器是不会发送凭证信息的。但如果将<a title="En/XMLHttpRequest" class="internal" href="https://developer.mozilla.org/en/DOM/XMLHttpRequest"><code>XMLHttpRequest</code></a>的一个特殊标志位设置为true，浏览器就将允许该请求的发送。</p>

<p><code class="plain">http://foo.example站点的脚本向<code class="plain">http://bar.other站点发送一个GET请求，并设置了一个Cookies</code></code>值。脚本代码如下：</p>

<pre id="line1" class="brush: js line-numbers  language-js"><code class=" language-js"><span class="token keyword">var</span> invocation <span class="token operator">=</span> <span class="token keyword">new</span> <span class="token class-name">XMLHttpRequest</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
<span class="token keyword">var</span> url <span class="token operator">=</span> <span class="token string">'http://bar.other/resources/credentialed-content/'</span><span class="token punctuation">;</span>
    
<span class="token keyword">function</span> <span class="token function">callOtherDomain</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">{</span>
  <span class="token keyword">if</span><span class="token punctuation">(</span>invocation<span class="token punctuation">)</span> <span class="token punctuation">{</span>
    invocation<span class="token punctuation">.</span><span class="token function">open</span><span class="token punctuation">(</span><span class="token string">'GET'</span><span class="token punctuation">,</span> url<span class="token punctuation">,</span> <span class="token keyword">true</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
    invocation<span class="token punctuation">.</span>withCredentials <span class="token operator">=</span> <span class="token keyword">true</span><span class="token punctuation">;</span>
    invocation<span class="token punctuation">.</span>onreadystatechange <span class="token operator">=</span> handler<span class="token punctuation">;</span>
    invocation<span class="token punctuation">.</span><span class="token function">send</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span> 
  <span class="token punctuation">}</span><span class="line-numbers-rows"><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span></span></code></pre>

<p>如你所见，第七行代码将<a title="En/XMLHttpRequest" class="internal" href="https://developer.mozilla.org/en/DOM/XMLHttpRequest"><code>XMLHttpRequest</code></a>的<code>withCredentials标志设置为true，</code>从而使得Cookies可以随着请求发送。因为这是一个简单的GET请求，所以浏览器不会发送一个“预请求”。但是，如果服务器端的响应中，如果没有返回<code>Access-Control-Allow-Credentials: true的响应头，那么浏览器将不会把响应结果传递给发出请求的脚本程序，以保证信息的安全。</code></p>

<p>客服端与服务器端交互示例如下：</p>

<pre class="brush: shell line-numbers  language-shell"><code class=" language-shell">GET /resources/access-control-with-credentials/ HTTP/1.1
Host: bar.other
User-Agent: Mozilla/5.0 (Macintosh; U; Intel Mac OS X 10.5; en-US; rv:1.9.1b3pre) Gecko/20081130 Minefield/3.1b3pre
Accept: text/html,application/xhtml+xml,application/xml;q=0.9,*/*;q=0.8
Accept-Language: en-us,en;q=0.5
Accept-Encoding: gzip,deflate
Accept-Charset: ISO-8859-1,utf-8;q=0.7,*;q=0.7
Connection: keep-alive
Referer: http://foo.example/examples/credential.html
Origin: http://foo.example
Cookie: pageAccess=2


HTTP/1.1 200 OK
Date: Mon, 01 Dec 2008 01:34:52 GMT
Server: Apache/2.0.61 (Unix) PHP/4.4.7 mod_ssl/2.0.61 OpenSSL/0.9.7e mod_fastcgi/2.4.2 DAV/2 SVN/1.4.2
X-Powered-By: PHP/5.2.6
Access-Control-Allow-Origin: http://foo.example
Access-Control-Allow-Credentials: true
Cache-Control: no-cache
Pragma: no-cache
Set-Cookie: pageAccess=3; expires=Wed, 31-Dec-2008 01:34:53 GMT
Vary: Accept-Encoding, Origin
Content-Encoding: gzip
Content-Length: 106
Keep-Alive: timeout=2, max=100
Connection: Keep-Alive
Content-Type: text/plain


[text/plain payload]<span class="line-numbers-rows"><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span></span></code></pre>

<p>虽然第11行指定了要提交到http://bar.other的内容的Cookie信息,但是如果bar.other的响应头里没有Access-Control-Allow-Credentials:true(第19行),则响应会被忽略. <strong>特别注意: </strong>给一个带有withCredentials的请求发送响应的时候,服务器端必须指定允许请求的域名,不能使用'*'.上面这个例子中,如果响应头是这样的:<code style="font-style: normal;">Access-Control-Allow-Origin: * ,则响应会失败. 在这个例子里,因为</code><span style="font-family: consolas,monaco,andale mono,monospace;">Access-Control-Allow-Origin的值是http://foo.example这个指定的请求域名,所以客户端把带有凭证信息的内容被返回给了客户端. 另外注意第22行,更多的cookie信息也被创建了.</span></p>

<p>上面这些例子的运行可以<a class="external external-icon" href="http://arunranga.com/examples/access-control/">查看这里</a>.下一部分将讨论实际的HTTP头信息.</p>

<p>&nbsp;</p>

<h2 id="HTTP响应头">HTTP响应头<a href="https://developer.mozilla.org/zh-CN/docs/Web/HTTP/Access_control_CORS$edit#HTTP响应头" class="button section-edit only-icon"><i aria-hidden="true" class="icon-pencil"></i><span>Edit</span></a></h2>

<p>这部分里列出了跨域资源共享(Cross-Origin Resource Sharing)时,服务器端需要返回的响应头信息.上一部分内容是这部分内容在实际运用中的一个概述.</p>

<h3 id="Access-Control-Allow-Origin">Access-Control-Allow-Origin</h3>

<p>返回的资源需要有一个&nbsp;<code style="font-style: normal;">Access-Control-Allow-Origin 头信息,语法如下:</code></p>

<pre class="line-numbers  language-html"><code class=" language-html">Access-Control-Allow-Origin: <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>origin</span><span class="token punctuation">&gt;</span></span> | *<span class="line-numbers-rows"><span></span></span></code></pre>

<p>origin参数指定一个允许向该服务器提交请求的URI.对于一个不带有credentials的请求,可以指定为'*',表示允许来自所有域的请求.</p>

<p>举个栗子,允许来自&nbsp;http://mozilla.com 的请求,你可以这样指定:</p>

<pre class="line-numbers  language-html"><code class=" language-html">Access-Control-Allow-Origin: http://mozilla.com<span class="line-numbers-rows"><span></span></span></code></pre>

<p>如果服务器端指定了域名,而不是'*',那么响应头的Vary值里必须包含Origin.它告诉客户端: 响应是根据请求头里的Origin的值来返回不同的内容的.</p>

<p></p><div class="headingWithIndicator"> 
    <h3 id="Access-Control-Expose-Headers">Access-Control-Expose-Headers</h3> 
    <span class="indicatorInHeadline minVer geckoMinVerMethod">(Firefox 4 / Thunderbird 3.3 / SeaMonkey 2.1)</span> 
</div><p></p>

<p>设置浏览器允许访问的服务器的头信息的白名单:</p>

<pre class="line-numbers  language-html"><code class=" language-html">Access-Control-Expose-Headers: X-My-Custom-Header, X-Another-Custom-Header<span class="line-numbers-rows"><span></span></span></code></pre>

<p>这样,&nbsp;<code style="font-style: normal;">X-My-Custom-Header</code>&nbsp;和&nbsp;<code style="font-style: normal;">X-Another-Custom-Header这两个头信息,都可以被浏览器得到.</code></p>

<h3 id="Access-Control-Max-Age">Access-Control-Max-Age</h3>

<p>这个头告诉我们这次预请求的结果的有效期是多久,如下:</p>

<pre class="line-numbers  language-html"><code class=" language-html">Access-Control-Max-Age: <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>delta-seconds</span><span class="token punctuation">&gt;</span></span><span class="line-numbers-rows"><span></span></span></code></pre>

<p><code>delta-seconds</code> 参数表示,允许这个预请求的参数缓存的秒数,在此期间,不用发出另一条预检请求.&nbsp;</p>

<h3 id="Access-Control-Allow-Credentials">Access-Control-Allow-Credentials</h3>

<p>告知客户端,当请求的credientials属性是true的时候,响应是否可以被得到.当它作为预请求的响应的一部分时,它用来告知实际的请求是否使用了credentials.注意,简单的GET请求不会预检,所以如果一个请求是为了得到一个带有credentials的资源,而响应里又没有Access-Control-Allow-Credentials头信息,那么说明这个响应被忽略了.</p>

<pre class="line-numbers  language-html"><code class=" language-html">Access-Control-Allow-Credentials: true | false<span class="line-numbers-rows"><span></span></span></code></pre>

<p>带有credential的请求在<a href="https://developer.mozilla.org/en-US/docs/Web/HTTP/Access_control_CORS#Requests_with_credentials">上面</a>讨论.</p>

<h3 id="Access-Control-Allow-Methods">Access-Control-Allow-Methods</h3>

<p>指明资源可以被请求的方式有哪些(一个或者多个). 这个响应头信息在客户端发出预检请求的时候会被返回. 上面有相关的例子.</p>

<pre class="line-numbers  language-html"><code class=" language-html">Access-Control-Allow-Methods: <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>method</span><span class="token punctuation">&gt;</span></span>[, <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>method</span><span class="token punctuation">&gt;</span></span>]*<span class="line-numbers-rows"><span></span></span></code></pre>

<p>发出预检请求的例子<a class="new" href="https://developer.mozilla.org/zh-CN/docs/Web/HTTP/Access_control_CORS$edit#Preflighted_requests">见上</a>,这个例子里就有向客户端发送Access-Control-Allow-Methods响应头信息.</p>

<h3 id="Access-Control-Allow-Headers">Access-Control-Allow-Headers</h3>

<p>也是在响应预检请求的时候使用.用来指明在实际的请求中,可以使用哪些自定义HTTP请求头.比如</p>

<pre style="padding: 1em 0px 1em 30px; font-size: 14px; white-space: normal; color: rgb(77, 78, 83);" class=" language-html"><code style="direction: ltr; white-space: pre;" class=" language-html">Access-Control-Allow-Headers: X-PINGOTHER</code></pre>

<p>这样在实际的请求里,请求头信息里就可以有这么一条:</p>

<pre style="padding: 1em; font-size: 14px; white-space: normal; color: rgb(77, 78, 83);" class="brush: shell  language-shell"><code style="direction: ltr; white-space: pre;" class=" language-shell">X-PINGOTHER: pingpong</code></pre>

<p>可以有多个自定义HTTP请求头,用逗号分隔.</p>

<pre class="line-numbers  language-html"><code class=" language-html">Access-Control-Allow-Headers: <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>field-name</span><span class="token punctuation">&gt;</span></span>[, <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>field-name</span><span class="token punctuation">&gt;</span></span>]*<span class="line-numbers-rows"><span></span></span></code></pre>

<h2 id="HTTP_请求头">HTTP 请求头<a href="https://developer.mozilla.org/zh-CN/docs/Web/HTTP/Access_control_CORS$edit#HTTP_请求头" class="button section-edit only-icon"><i aria-hidden="true" class="icon-pencil"></i><span>Edit</span></a></h2>

<p>这部分内容列出来当浏览器发出跨域请求时可能用到的HTTP请求头.注意这些请求头信息都是在请求服务器的时候已经为你设置好的,当开发者使用跨域的XMLHttpRequest的时候,不需要手动的设置这些头信息.</p>

<h3 id="Origin">Origin</h3>

<p>表明发送请求或者预请求的域</p>

<pre class="line-numbers  language-html"><code class=" language-html">Origin: <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>origin</span><span class="token punctuation">&gt;</span></span><span class="line-numbers-rows"><span></span></span></code></pre>

<p>参数origin是一个URI,告诉服务器端,请求来自哪里.它不包含任何路径信息,只是服务器名.</p>

<div class="note"><strong>Note:</strong>&nbsp;Origin的值可以是一个空字符串,这是很有用的.</div>

<p>注意,不仅仅是跨域请求,普通请求也会带有ORIGIN头信息.</p>

<h3 id="Access-Control-Request-Method">Access-Control-Request-Method</h3>

<p>在发出预检请求时带有这个头信息,告诉服务器在实际请求时会使用的请求方式</p>

<pre class="line-numbers  language-html"><code class=" language-html">Access-Control-Request-Method: <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>method</span><span class="token punctuation">&gt;</span></span><span class="line-numbers-rows"><span></span></span></code></pre>

<p>相关的例子可以在<a href="https://developer.mozilla.org/zh-CN/docs/Web/HTTP/Access_control_CORS#Preflighted_requests">这里</a>找到</p>

<h3 id="Access-Control-Request-Headers">Access-Control-Request-Headers</h3>

<p>在发出预检请求时带有这个头信息,告诉服务器在实际请求时会携带的自定义头信息.如有多个,可以用逗号分开.</p>

<pre class="line-numbers  language-html"><code class=" language-html">Access-Control-Request-Headers: <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>field-name</span><span class="token punctuation">&gt;</span></span>[, <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>field-name</span><span class="token punctuation">&gt;</span></span>]*<span class="line-numbers-rows"><span></span></span></code></pre>

<p>相关的例子可以在<a href="https://developer.mozilla.org/zh-CN/docs/Web/HTTP/Access_control_CORS#">这里</a>找到</p>

<h2 id="浏览器支持">浏览器支持<a href="https://developer.mozilla.org/zh-CN/docs/Web/HTTP/Access_control_CORS$edit#浏览器支持" class="button section-edit only-icon"><i aria-hidden="true" class="icon-pencil"></i><span>Edit</span></a></h2>

<p></p><div class="htab"> 
    <a name="AutoCompatibilityTable" id="AutoCompatibilityTable"></a> 
    <ul> 
        <li class="selected"><a>Desktop</a></li> 
        <li><a>Mobile</a></li> 
    </ul> 
<div id="compat-desktop" style="display: block;">
<table class="compat-table">
 <tbody>
  <tr>
   <th>Feature</th>
   <th>Chrome</th>
   <th>Firefox (Gecko)</th>
   <th>Internet Explorer</th>
   <th>Opera</th>
   <th>Safari</th>
  </tr>
  <tr>
   <td>Basic support</td>
   <td>4</td>
   <td>3.5</td>
   <td>8 (via XDomainRequest)<br>
    10</td>
   <td>12</td>
   <td>4</td>
  </tr>
 </tbody>
</table>
</div><div id="compat-mobile" style="display: none;">
<table class="compat-table">
 <tbody>
  <tr>
   <th>Feature</th>
   <th>Android</th>
   <th>Chrome for Android</th>
   <th>Firefox Mobile (Gecko)</th>
   <th>IE Mobile</th>
   <th>Opera Mobile</th>
   <th>Safari Mobile</th>
  </tr>
  <tr>
   <td>Basic support</td>
   <td>2.1</td>
   <td>yes</td>
   <td>yes</td>
   <td><span title="Compatibility unknown; please update this." style="color: rgb(255, 153, 0);">?</span></td>
   <td>12</td>
   <td>3.2</td>
  </tr>
 </tbody>
</table>
</div></div><p></p>





<h4 id="注意：">注意：</h4>

<p>Internet Explorer 8 和 9 通过 XDomainRequest 对象来实现CORS ，但是在IE 10中有完整的实现。Firefox 3.5 就引入了对跨站 XMLHttpRequests 和 Web 字体的支持 ，尽管存在着一些直到后续版本才取消的限制。特别的， Firefox 7 引入了对跨站 WebGL 纹理的 HTTP 请求的支持，而且 Firefox 9 添加对通过 drawImage 在 canvas 上绘图的支持。</p>

<h2 id="相关链接">相关链接<a href="https://developer.mozilla.org/zh-CN/docs/Web/HTTP/Access_control_CORS$edit#相关链接" class="button section-edit only-icon"><i aria-hidden="true" class="icon-pencil"></i><span>Edit</span></a></h2>

<ul>
 <li><a title="http://arunranga.com/examples/access-control/" class="external external-icon" href="http://arunranga.com/examples/access-control/">Code Samples Showing <code>XMLHttpRequest</code> and Cross-Origin Resource Sharing</a></li>
 <li><a title="En/Server-Side Access Control" class="internal" href="https://developer.mozilla.org/En/Server-Side_Access_Control">Cross-Origing Resource Sharing From a Server-Side Perspective (PHP, etc.)</a></li>
 <li><a title="http://www.w3.org/TR/cors/" class="external external-icon" href="http://www.w3.org/TR/cors/">Cross-Origin Resource Sharing specification</a></li>
 <li><a title="en/XMLHttpRequest" class="internal" href="https://developer.mozilla.org/en/DOM/XMLHttpRequest"><code>XMLHttpRequest</code></a></li>
 <li><a title="http://crypto.stanford.edu/websec/specs/origin-header/" class="external external-icon" href="http://crypto.stanford.edu/websec/specs/origin-header/">Further Discussion of the Origin Header</a></li>
 <li><a title="http://www.kendoui.com/blogs/teamblog/posts/11-10-04/using_cors_with_all_modern_browsers.aspx" class="external external-icon" href="http://www.kendoui.com/blogs/teamblog/posts/11-10-03/using_cors_with_all_modern_browsers.aspx">Using CORS with All (Modern) Browsers</a></li>
 <li><a title="http://www.html5rocks.com/en/tutorials/cors/" class="external external-icon" href="http://www.html5rocks.com/en/tutorials/cors/">Using CORS - HTML5 Rocks</a></li>
</ul>

<p></p>
                  
                
              </article>

              

    
    
    

    
    
    

    <div class="share">
        <strong>分享：</strong>
        <ul>
            <li><a href="http://twitter.com/share?url=https%3A%2F%2Fdeveloper.mozilla.org%2Fzh-CN%2Fdocs%2FWeb%2FHTTP%2FAccess_control_CORS%3Futm_campaign%3Dshare%26utm_medium%3Ddoc%2Bshare%2Blink%26utm_source%3Dtwitter.com&amp;text=%E6%88%91%E5%B7%B2%E7%BB%8F%E4%BA%86%E8%A7%A3%E4%BA%86+MDN+%E4%B8%8A%E7%9A%84+HTTP%E8%AE%BF%E9%97%AE%E6%8E%A7%E5%88%B6%28CORS%29%E3%80%82" target="_blank" data-url="https://developer.mozilla.org/zh-CN/docs/Web/HTTP/Access_control_CORS?utm_campaign=share&amp;utm_medium=doc+share+link&amp;utm_source=twitter.com" data-title="我已经了解了 MDN 上的 HTTP访问控制(CORS)。" class="share-link twitter"><i aria-hidden="true" class="icon-twitter"></i>Twitter</a></li>
            <li><a href="http://facebook.com/sharer.php?s=100&amp;p[url]=https://developer.mozilla.org/zh-CN/docs/Web/HTTP/Access_control_CORS?utm_campaign=share&amp;utm_medium=doc+share+link&amp;utm_source=facebook.com" target="_blank" data-url="https://developer.mozilla.org/zh-CN/docs/Web/HTTP/Access_control_CORS?utm_campaign=share&amp;utm_medium=doc+share+link&amp;utm_source=facebook.com" data-title="我已经了解了 MDN 上的 HTTP访问控制(CORS)。" class="share-link facebook"><i aria-hidden="true" class="icon-facebook"></i>Facebook</a></li>
            <li><a href="https://plus.google.com/share?url=https%3A%2F%2Fdeveloper.mozilla.org%2Fzh-CN%2Fdocs%2FWeb%2FHTTP%2FAccess_control_CORS%3Futm_campaign%3Dshare%26utm_medium%3Ddoc%2Bshare%2Blink%26utm_source%3Dplus.google.com" target="_blank" data-url="https://developer.mozilla.org/zh-CN/docs/Web/HTTP/Access_control_CORS?utm_campaign=share&amp;utm_medium=doc+share+link&amp;utm_source=plus.google.com" data-title="我已经了解了 MDN 上的 HTTP访问控制(CORS)。" class="share-link gplus"><i aria-hidden="true" class="icon-google-plus"></i>Google+</a></li>
        </ul>
    </div>

              

                <!-- contributors -->
                <div class="wiki-block contributors">
                  <h2 class="offscreen">文档标签和贡献者</h2>
                  
                  

                  
                    <div class="contributors-sub">
                      <i aria-hidden="true" class="icon-group icon-fw"></i>&nbsp;<strong>此页面的贡献者：</strong> 
        <a href="https://developer.mozilla.org/zh-CN/profiles/ybwdaisy">ybwdaisy</a>, 
    
        <a href="https://developer.mozilla.org/zh-CN/profiles/fjywan">fjywan</a>, 
    
        <a href="https://developer.mozilla.org/zh-CN/profiles/holynewbie">holynewbie</a>, 
    
        <a href="https://developer.mozilla.org/zh-CN/profiles/gqqnbig">gqqnbig</a>, 
    
        <a href="https://developer.mozilla.org/zh-CN/profiles/EdwardStudy">EdwardStudy</a>, 
    
        <a href="https://developer.mozilla.org/zh-CN/profiles/ssjssh">ssjssh</a>, 
    
        <a href="https://developer.mozilla.org/zh-CN/profiles/Kevin-Xi">Kevin-Xi</a>, 
    
        <a href="https://developer.mozilla.org/zh-CN/profiles/8427003">8427003</a>, 
    
        <a href="https://developer.mozilla.org/zh-CN/profiles/Meteormatt">Meteormatt</a>, 
    
        <a href="https://developer.mozilla.org/zh-CN/profiles/OOP-Code-Bunny">OOP-Code-Bunny</a>, 
    
        <a href="https://developer.mozilla.org/zh-CN/profiles/CManLH">CManLH</a>, 
    
        <a href="https://developer.mozilla.org/zh-CN/profiles/qiumaoyuan">qiumaoyuan</a>
    
                    </div>
                  

                  
                    <div class="contributors-sub">
                      <i aria-hidden="true" class="icon-clock-o icon-fw"></i>&nbsp;<strong>最后编辑者:</strong>
                      <a href="https://developer.mozilla.org/zh-CN/profiles/ybwdaisy">ybwdaisy</a>,
                      <time datetime="2016-05-12T21:13:19-07:00">May 12, 2016, 9:13:19 PM</time>
                    </div>
                  
                </div>
              
            </div>

            
          </div>
        </div>
      </div>
    </div> <!-- ends "main-content" -->

  <menu type="context" id="edit-history-menu">
    <menuitem data-action="/zh-CN/docs/Web/HTTP/Access_control_CORS$edit" label="编辑页面"></menuitem>
    <menuitem data-action="/zh-CN/docs/Web/HTTP/Access_control_CORS$history" label="查看页面历史"></menuitem>
  </menu>

  </div></main>

  <!-- Footer -->
  <footer><div class="center">
    <div class="column-container">
      <div class="column-main">
        
        <div class="contentinfo">
          <p>© 2005-2016 Mozilla 开发者网络及各贡献者</p> <p>内容可按<a href="https://developer.mozilla.org/en-US/docs/MDN/About#Copyrights_and_licenses">这些许可协议</a>使用。</p>
          <ul>
            <li><a href="https://developer.mozilla.org/docs/MDN/About">关于 MDN</a></li>
            <li><a href="https://www.mozilla.org/about/legal/terms/mozilla">条款</a></li>
            <li><a href="https://www.mozilla.org/privacy/websites/">隐私</a></li>
            <li><a href="https://www.mozilla.org/privacy/websites/#cookies">Cookie</a></li>
            <li><a href="https://github.com/mozilla/kuma">贡献代码</a></li>
          </ul>
        <p></p>
        
        </div>
      </div>
      <div class="column-strip">
        
          
  
    <form class="languages go" method="get" action="https://developer.mozilla.org/zh-CN/docs/Web">
      <label for="language">其他语言：</label>
      <select id="language" class="wiki-l10n" name="next" dir="ltr">
        <option value="/zh-CN/docs/Web/HTTP/Access_control_CORS" selected="">
          中文 (简体)
        </option>
        
          <option value="/ja/docs/HTTP_access_control">
            日本語
          </option>
          <option value="/en-US/docs/Web/HTTP/Access_control_CORS">
            English (US)
          </option>
          <option value="/zh-TW/docs/HTTP/Access_control_CORS">
            正體中文 (繁體)
          </option>
          <option value="/fr/docs/HTTP/Access_control_CORS">
            Français
          </option>
          <option value="/es/docs/Web/HTTP/Access_control_CORS">
            Español
          </option>
          <option value="/ko/docs/Web/HTTP/Access_control_CORS">
            한국어
          </option>
      </select>
      <noscript>&lt;button type="submit"&gt;转到&lt;/button&gt;</noscript>
    </form>
  

        
      </div>
    </div>
  </div></footer>

  <!-- site js -->
  
    
    <!--[if lte IE 8]><script type="text/javascript" src="https://developer.cdn.mozilla.net/static/build/js/selectivizr.091e18cf669b.js" charset="utf-8"></script><![endif]-->

    <form id="_persona_login" method="post" action="https://developer.mozilla.org/users/persona/signin" data-csrf-token-url="/users/persona/csrf" data-request="{&quot;siteName&quot;: &quot;Mozilla Developer Network&quot;, &quot;siteLogo&quot;: &quot;/static/img/opengraph-logo.png&quot;}" data-persona-script="https://login.persona.org/include.js">
  <input type="hidden" name="csrfmiddlewaretoken" value="" id="_persona_csrf_token">
  <input type="hidden" name="next" value="" id="_persona_next_url">
  <input type="hidden" name="process" value="" id="_persona_process">
  <input type="hidden" name="assertion" id="_persona_assertion">
</form>


    <script type="text/javascript" src="./HTTP访问控制(CORS) - HTTP _ MDN_files/main.a7b27a25fb9c.js" charset="utf-8"></script>

      <script>
        if(window.mdn && mdn.analytics) mdn.analytics.trackOutboundLinks();
      </script>

    
    <script type="text/javascript" src="./HTTP访问控制(CORS) - HTTP _ MDN_files/javascript.c80a25c84891.js"></script>
  
    <script async="" type="text/javascript" src="./HTTP访问控制(CORS) - HTTP _ MDN_files/wiki.dd33525657cb.js" charset="utf-8"></script>


  

  <script async="" type="text/javascript" src="./HTTP访问控制(CORS) - HTTP _ MDN_files/helpfulness.320352cf4b63.js" charset="utf-8"></script>

  
    <script type="text/javascript">
        (function($) {
            $('#wikiArticle').children('h2[id]').each(function() {
                var id = $(this).attr('id');
                var href = '/zh-CN/docs/Web/HTTP/Access_control_CORS$edit#' + id;

                $('<a>').attr({
                    href: href,
                    'class': 'button section-edit only-icon'
                })
                .append($('<i aria-hidden="true" class="icon-pencil"></i>'))
                .append($('<span>'))
                .find('span')
                .text(gettext('Edit'))
                .end()
                .on('click', function(e) {
                    e.preventDefault();

                    mdn.analytics.trackEvent({
                        category: 'Section Edit',
                        action: id
                    }, function() {
                        window.location = href;
                    });
                })
                .appendTo(this);
            });
        })(jQuery);
    </script>
  



<audio controls="controls" style="display: none;"></audio></body><div id="cye-workaround-body" style="position: absolute; left: 0px; top: 0px; z-index: -2147483646; height: 9895px; width: 1903px; background: none 0% 0% / auto repeat scroll padding-box border-box rgb(255, 255, 255);"></div><div id="cye-workaround-body-image" style="position: absolute; left: 0px; top: 0px; z-index: -2147483645; height: 9895px; width: 1903px; background: none 0% 0% / auto repeat scroll padding-box border-box rgba(0, 0, 0, 0);"></div><style type="text/css">#yddContainer{display:block;font-family:Microsoft YaHei;position:relative;width:100%;height:100%;top:-4px;left:-4px;font-size:12px;border:1px solid}#yddTop{display:block;height:22px}#yddTopBorderlr{display:block;position:static;height:17px;padding:2px 28px;line-height:17px;font-size:12px;color:#5079bb;font-weight:bold;border-style:none solid;border-width:1px}#yddTopBorderlr .ydd-sp{position:absolute;top:2px;height:0;overflow:hidden}.ydd-icon{left:5px;width:17px;padding:0px 0px 0px 0px;padding-top:17px;background-position:-16px -44px}.ydd-close{right:5px;width:16px;padding-top:16px;background-position:left -44px}#yddKeyTitle{float:left;text-decoration:none}#yddMiddle{display:block;margin-bottom:10px}.ydd-tabs{display:block;margin:5px 0;padding:0 5px;height:18px;border-bottom:1px solid}.ydd-tab{display:block;float:left;height:18px;margin:0 5px -1px 0;padding:0 4px;line-height:18px;border:1px solid;border-bottom:none}.ydd-trans-container{display:block;line-height:160%}.ydd-trans-container a{text-decoration:none;}#yddBottom{position:absolute;bottom:0;left:0;width:100%;height:22px;line-height:22px;overflow:hidden;background-position:left -22px}.ydd-padding010{padding:0 10px}#yddWrapper{color:#252525;z-index:10001;background:url(chrome-extension://eopjamdnofihpioajgfdikhhbobonhbb/ab20.png);}#yddContainer{background:#fff;border-color:#4b7598}#yddTopBorderlr{border-color:#f0f8fc}#yddWrapper .ydd-sp{background-image:url(chrome-extension://eopjamdnofihpioajgfdikhhbobonhbb/ydd-sprite.png)}#yddWrapper a,#yddWrapper a:hover,#yddWrapper a:visited{color:#50799b}#yddWrapper .ydd-tabs{color:#959595}.ydd-tabs,.ydd-tab{background:#fff;border-color:#d5e7f3}#yddBottom{color:#363636}#yddWrapper{min-width:250px;max-width:400px;}</style></html>